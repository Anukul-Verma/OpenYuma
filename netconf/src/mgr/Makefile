# Makefile for NETCONF project
#  
#   NCX manager main directory

############### SOURCE PROFILE #############################
SUBDIR_NM=mgr
SUBDIR_CPP=

############### TARGET PROFILE ##############################
TARGET=$(TBASE)/$(SUBDIR_NM)
BIN_INST=$(TBASE)/bin

####################### MAKE RULES #########################
ifdef DEVELOPER
all:
else
all: mgrdummy mgrlib
endif  # DEVELOPER

#################### PLATFORM DEFINITIONS ############
include ../platform/platform.profile

################ DEPENDENCIES #########################
# depend rule must be included after the 'all' make rule

include ../platform/platform.profile.depend

ifdef FREEBSD
REAL_INST=$(DESTDIR)$(PREFIX)/lib
else
ifdef LIB64
REAL_INST=$(DESTDIR)$(PREFIX)/lib64
else
REAL_INST=$(DESTDIR)$(PREFIX)/lib
endif
endif

LIB_INST=$(TBASE)/lib

test:

install: $(BLD_INCLUDES)
# install static or dynamic libmgr file
	mkdir -p $(REAL_INST)
	install -m 644 $(LIB_INST)/lib$(SUBDIR_NM).$(LIBNCXSUFFIX) $(REAL_INST)

uninstall:

mgrlib: dependencies $(LBASE)/lib$(SUBDIR_NM).a


# this dummy rule keeps make from deleting the $(OBJS) as
# intermediate files
mgrdummy: dependencies $(OBJS)


clean:
	rm -f $(OBJS) $(LBASE)/lib$(SUBDIR_NM).*

superclean:
	rm -f *~  $(DEPS) dependencies $(OBJS) \
	$(LBASE)/lib$(SUBDIR_NM).*

distclean: superclean

.PHONY: mgrlib mgrdummy

# prevent the make program from choking on all the symbols
# that get generated from autogenerated make rules
.NOEXPORT:

ifndef DEVELOPER
include dependencies
endif
